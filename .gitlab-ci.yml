image: golang:1.6

before_script:
  - "go get -u maunium.net/go/maulogger"
  - "go get -u github.com/tucnak/telebot"
  - "go get -u github.com/ogier/pflag"
  - "go get -u golang.org/x/net/html"
  - "go get -u github.com/SlyMarbo/rss"
  - "go get -u github.com/tdewolff/minify"
  - "go get -u github.com/tdewolff/minify/html"
  - "ln -s /builds/pvl/ranssibot /go/src/maunium.net/go/ranssibot"

build:
  script:
    - "env GOOS=linux GOARCH=amd64 go build -o ranssibot_amd64"
    - "env GOOS=linux GOARCH=arm go build -o ranssibot_arm"
    - "env GOOS=windows GOARCH=amd64 go build -o ranssibot_amd64.exe"
  stage: build
  tags:
    - golang
  artifacts:
    paths:
    - ranssibot_amd64
    - ranssibot_arm
    - ranssibot_amd64.exe
    - LICENSE
